<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boceto - ¿Qué Cocino Hoy?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        #app-container {
            flex-grow: 1;
        }
        .card-enter, .page-enter {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Estilo para el checklist de ingredientes */
        .ingredient-item input:checked + span {
            text-decoration: line-through;
            color: #9ca3af; /* gray-400 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="app-container" class="container mx-auto p-4 md:p-8 max-w-4xl">

        <!-- ==================================================== -->
        <!-- ============== PÁGINA PRINCIPAL (BUSCADOR) ========= -->
        <!-- ==================================================== -->
        <div id="pagina-principal">
            <header class="text-center my-8 md:my-12">
                <h1 class="text-4xl md:text-5xl font-bold text-orange-600">¿Qué Cocino Hoy?</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-600">Dime qué tienes en la heladera y te doy ideas frescas y rápidas.</p>
            </header>

            <main>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg max-w-lg mx-auto">
                    <div class="space-y-6">
                        <div>
                            <label for="ingredientes" class="block text-sm font-medium text-gray-700 mb-2">Ingresa uno o dos ingredientes principales</label>
                            <input type="text" id="ingredientes" placeholder="Ej: Batata, acelga, brócoli..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition">
                        </div>
                        <div>
                            <label for="comensales" class="block text-sm font-medium text-gray-700 mb-2">¿Cuántos son a la mesa?</label>
                            <input type="number" id="comensales" value="2" min="1" max="12" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition">
                        </div>
                        <div>
                            <button id="buscar-btn" class="w-full bg-orange-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-transform transform hover:scale-105">
                                ¡Dame Ideas!
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- ==================================================== -->
        <!-- ============== PÁGINA DE RESULTADOS (OCULTA) ======= -->
        <!-- ==================================================== -->
        <div id="pagina-resultados" class="hidden">
            <header class="mb-8">
                 <button id="volver-a-buscar-btn" class="text-orange-600 hover:text-orange-800 font-semibold">&larr; Volver a buscar</button>
                 <h2 id="resultados-titulo" class="text-center text-2xl md:text-3xl font-bold text-gray-800 mt-4"></h2>
            </header>

            <main id="cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                <!-- Las tarjetas de recetas se insertarán aquí -->
            </main>
        </div>

        <!-- ==================================================== -->
        <!-- ============== PÁGINA DE RECETA COMPLETA (OCULTA) == -->
        <!-- ==================================================== -->
        <div id="pagina-receta-completa" class="hidden">
            <header class="mb-8">
                <button id="volver-a-resultados-btn" class="text-orange-600 hover:text-orange-800 font-semibold">&larr; Volver a los resultados</button>
            </header>
            <main id="receta-contenido" class="bg-white rounded-2xl shadow-lg overflow-hidden page-enter">
                <!-- El contenido de la receta se insertará aquí -->
            </main>
        </div>

    </div>

    <!-- ==================================================== -->
    <!-- ============== INICIO DEL FOOTER ACTUALIZADO ========= -->
    <!-- ==================================================== -->
    <footer class="text-center py-6">
        <p class="text-sm text-gray-500">
            Desarrollado en el marco de la Formación en IA aplicada a Contextos Organizacionales de 
            <a href="https://codeki.com.ar/ia-aplicada-a-contextos-organizacionales/" target="_blank" rel="noopener noreferrer" class="underline text-orange-600 hover:text-orange-800">Codeki</a>.
        </p>
        <div class="mt-2">
            <!-- Se actualizó el href para apuntar al archivo PDF -->
            <a href="https://drive.google.com/file/d/1kxD3IIVSG7rOe3Mwwac1aGXFOWMwMwMl/view?usp=drive_link" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 underline hover:text-blue-800">Ver cómo</a>
        </div>
    </footer>
    <!-- ==================================================== -->
    <!-- ================ FIN DEL FOOTER ACTUALIZADO ========== -->
    <!-- ==================================================== -->


    <script>
        // --- ELEMENTOS DEL DOM ---
        const paginaPrincipal = document.getElementById('pagina-principal');
        const paginaResultados = document.getElementById('pagina-resultados');
        const paginaRecetaCompleta = document.getElementById('pagina-receta-completa');
        
        const buscarBtn = document.getElementById('buscar-btn');
        const volverABuscarBtn = document.getElementById('volver-a-buscar-btn');
        const volverAResultadosBtn = document.getElementById('volver-a-resultados-btn');
        
        const resultadosTitulo = document.getElementById('resultados-titulo');
        const cardsContainer = document.getElementById('cards-container');
        const recetaContenido = document.getElementById('receta-contenido');
        const ingredientesInput = document.getElementById('ingredientes');
        const comensalesInput = document.getElementById('comensales');

        // --- BASE DE DATOS DE RECETAS (con más detalle) ---
        const baseDeRecetas = [
            {
                id: "bunuelos-acelga",
                titulo: "Buñuelos de Acelga Esponjosos",
                ingredientesClave: ["acelga"],
                descripcion: "La receta clásica de la abuela, ¡pero más fácil! Perfectos como entrada o para picar.",
                ingredientes: [
                    { cantidad: "1", unidad: "atado", nombre: "Acelga" },
                    { cantidad: "2", unidad: "", nombre: "Huevos" },
                    { cantidad: "1", unidad: "taza", nombre: "Harina leudante" },
                    { cantidad: "2", unidad: "dientes", nombre: "Ajo picado" },
                    { cantidad: "a gusto", unidad: "", nombre: "Sal y perejil" },
                    { cantidad: "c/n", unidad: "", nombre: "Aceite para freír" }
                ],
                pasos: [
                    "Lava bien la acelga y cocínala en agua hirviendo por 3 minutos. Escúrrela muy bien y pícala chiquita.",
                    "En un bol, mezcla la acelga picada con los huevos, el ajo y el perejil.",
                    "Incorpora la harina de a poco, mezclando hasta que no queden grumos. La mezcla debe quedar espesa.",
                    "Calienta abundante aceite en una sartén. Con una cuchara, ve echando porciones de la mezcla.",
                    "Fríe los buñuelos hasta que estén dorados por ambos lados. Retíralos y déjalos escurrir sobre papel de cocina."
                ],
                tiempoPrep: "15 min",
                tiempoCoccion: "10 min",
                porciones: "4",
                imagenUrl: "https://placehold.co/800x400/d4a373/333333?text=Buñuelos"
            },
            {
                id: "bastones-batata",
                titulo: "Bastones de Batata al Horno",
                ingredientesClave: ["batata", "boniato"],
                descripcion: "Más sanos que las papas fritas y con un toque dulce que te va a encantar.",
                ingredientes: [
                    { cantidad: "2", unidad: "grandes", nombre: "Batatas" },
                    { cantidad: "2 cdas", unidad: "", nombre: "Aceite de oliva" },
                    { cantidad: "1 cdita", unidad: "", nombre: "Pimentón dulce" },
                    { cantidad: "a gusto", unidad: "", nombre: "Sal y pimienta" }
                ],
                pasos: [
                    "Precalienta el horno a 200°C.",
                    "Lava bien las batatas y córtalas en bastones, como si fueran papas fritas. Puedes dejarles la piel.",
                    "En un bol grande, mezcla los bastones de batata con el aceite de oliva, el pimentón, la sal y la pimienta. Asegúrate de que queden bien cubiertos.",
                    "Distribuye los bastones en una sola capa sobre una bandeja para horno con papel manteca.",
                    "Hornea durante 25-30 minutos, dándolos vuelta a la mitad del tiempo, hasta que estén dorados y tiernos por dentro."
                ],
                tiempoPrep: "10 min",
                tiempoCoccion: "30 min",
                porciones: "2",
                imagenUrl: "https://placehold.co/800x400/e67e22/FFFFFF?text=Bastones+de+Batata"
            },
            {
                id: "salteado-brocoli",
                titulo: "Salteado Rápido de Brócoli y Pollo",
                ingredientesClave: ["brócoli"],
                descripcion: "Una cena completa, saludable y lista en menos de 20 minutos. ¡Ideal para un día ocupado!",
                ingredientes: [
                    { cantidad: "1", unidad: "planta", nombre: "Brócoli" },
                    { cantidad: "1", unidad: "pechuga", nombre: "Pollo" },
                    { cantidad: "1", unidad: "", nombre: "Cebolla" },
                    { cantidad: "2 cdas", unidad: "", nombre: "Salsa de soja" },
                    { cantidad: "a gusto", unidad: "", nombre: "Semillas de sésamo" }
                ],
                pasos: [
                    "Corta el pollo en cubos y el brócoli en arbolitos pequeños. Pica la cebolla.",
                    "Saltea el pollo en un wok o sartén grande con un poco de aceite hasta que esté dorado. Retíralo y resérvalo.",
                    "En la misma sartén, saltea la cebolla y el brócoli hasta que estén tiernos pero crujientes.",
                    "Vuelve a incorporar el pollo a la sartén. Añade la salsa de soja y cocina por 2 minutos más.",
                    "Sirve inmediatamente, espolvoreando con semillas de sésamo."
                ],
                tiempoPrep: "10 min",
                tiempoCoccion: "10 min",
                porciones: "2",
                imagenUrl: "https://placehold.co/800x400/27ae60/FFFFFF?text=Salteado+de+Brócoli"
            }
        ];

        // --- LÓGICA DE NAVEGACIÓN Y RENDERIZADO ---

        function mostrarPagina(paginaAMostrar) {
            paginaPrincipal.classList.add('hidden');
            paginaResultados.classList.add('hidden');
            paginaRecetaCompleta.classList.add('hidden');
            paginaAMostrar.classList.remove('hidden');
        }

        function buscarRecetas() {
            const userInput = ingredientesInput.value.toLowerCase().trim();
            if (!userInput) {
                alert("Por favor, ingresa al menos un ingrediente.");
                return;
            }
            
            const ingredientesBuscados = userInput.split(',').map(item => item.trim());
            const recetasFiltradas = baseDeRecetas.filter(receta => 
                ingredientesBuscados.some(ing => receta.ingredientesClave.includes(ing))
            );
            
            mostrarPagina(paginaResultados);
            const comensales = comensalesInput.value || 2;
            resultadosTitulo.textContent = `Ideas con "${userInput}" para ${comensales} personas:`;
            cardsContainer.innerHTML = '';

            if (recetasFiltradas.length > 0) {
                recetasFiltradas.forEach((receta, index) => {
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-2xl shadow-lg flex flex-col card-enter overflow-hidden';
                    card.style.animationDelay = `${index * 100}ms`;
                    
                    card.innerHTML = `
                        <img src="${receta.imagenUrl.replace('800x400', '600x400')}" alt="Foto de ${receta.titulo}" class="w-full h-40 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/FFFFFF?text=Imagen+no+disponible';">
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-bold mb-2">${receta.titulo}</h3>
                            <p class="text-gray-600 mb-4 flex-grow">${receta.descripcion}</p>
                            <button data-id="${receta.id}" class="ver-receta-btn mt-auto w-full bg-gray-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-900 transition">Ver Receta Completa</button>
                        </div>
                    `;
                    cardsContainer.appendChild(card);
                });
            } else {
                 cardsContainer.innerHTML = `<p class="text-center col-span-full text-gray-600 mt-8">Lo siento, no encontré recetas con "${userInput}". ¡Intenta con otro ingrediente!</p>`;
            }
        }
        
        function mostrarRecetaCompleta(idReceta) {
            const receta = baseDeRecetas.find(r => r.id === idReceta);
            if (!receta) return;

            recetaContenido.innerHTML = `
                <img src="${receta.imagenUrl}" alt="Foto de ${receta.titulo}" class="w-full h-64 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/800x400/cccccc/FFFFFF?text=Imagen+no+disponible';">
                <div class="p-6 md:p-10">
                    <h2 class="text-3xl md:text-4xl font-bold mb-2">${receta.titulo}</h2>
                    <p class="text-lg text-gray-600 mb-6">${receta.descripcion}</p>
                    
                    <div class="flex flex-wrap gap-4 text-center bg-orange-50 p-4 rounded-lg mb-8">
                        <div class="flex-1">
                            <p class="text-sm text-gray-500">PREPARACIÓN</p>
                            <p class="font-bold">${receta.tiempoPrep}</p>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-500">COCCIÓN</p>
                            <p class="font-bold">${receta.tiempoCoccion}</p>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-500">PORCIONES</p>
                            <p class="font-bold">${receta.porciones}</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="md:col-span-1">
                            <h3 class="text-xl font-bold mb-4 border-b-2 border-orange-500 pb-2">Ingredientes</h3>
                            <ul class="space-y-3">
                                ${receta.ingredientes.map(ing => `
                                    <li class="ingredient-item">
                                        <label class="flex items-center cursor-pointer">
                                            <input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500 mr-3">
                                            <span><strong>${ing.cantidad} ${ing.unidad}</strong> de ${ing.nombre}</span>
                                        </label>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        <div class="md:col-span-2">
                            <h3 class="text-xl font-bold mb-4 border-b-2 border-orange-500 pb-2">Preparación</h3>
                            <ol class="space-y-4">
                                ${receta.pasos.map((paso, index) => `
                                    <li class="flex">
                                        <span class="bg-orange-600 text-white rounded-full h-8 w-8 text-lg flex items-center justify-center font-bold mr-4 flex-shrink-0">${index + 1}</span>
                                        <p class="pt-1">${paso}</p>
                                    </li>
                                `).join('')}
                            </ol>
                        </div>
                    </div>
                </div>
            `;
            mostrarPagina(paginaRecetaCompleta);
        }

        // --- ASIGNACIÓN DE EVENTOS ---
        buscarBtn.addEventListener('click', buscarRecetas);
        volverABuscarBtn.addEventListener('click', () => mostrarPagina(paginaPrincipal));
        volverAResultadosBtn.addEventListener('click', () => mostrarPagina(paginaResultados));
        
        // Event listener para los botones "Ver Receta Completa" (usa delegación de eventos)
        document.addEventListener('click', function(e) {
            if (e.target && e.target.classList.contains('ver-receta-btn')) {
                const id = e.target.getAttribute('data-id');
                mostrarRecetaCompleta(id);
            }
        });
    </script>

</body>
</html>
